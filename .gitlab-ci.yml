variables:
  GIT_SUBMODULE_STRATEGY: recursive

image: crosslab/devcontainer:latest

default:
  before_script:
    - sudo chown -R $(whoami) .
    - mkdir -p ~/.ssh/ && cp "$CI_SSH_KEY" ~/.ssh/id_rsa && chmod 600 ~/.ssh/id_rsa

build:
  stage: build
  rules:
    - if: $CI_COMMIT_BRANCH
  script:
    - ./scripts/ci.sh --branch=$CI_COMMIT_BRANCH