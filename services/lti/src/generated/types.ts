// @ts-nocheck
/**
 * This file was automatically generated by openapi-codegeneration.
 * DO NOT MODIFY IT BY HAND. Instead, modify the source OpenAPI file,
 * and run openapi-codegeneration to regenerate this file.
 */
import { Application, Request, ErrorRequestHandler } from "express"

import {
    validateUserType,
	validateUserTypeRequest,
	validateUserTypeResponse
} from "./basicValidation.cjs"
export type TypedRequest<P,B,Q> = Request<P, {}, B, Q, {}>

export type initServiceOptions = {
    preHandlers?: ((app: Application) => void)[]
    postHandlers?: ((app: Application) => void)[]
    errorHandler?: ErrorRequestHandler
}

export interface ResponseData {
    status: number,
    headers?: {
        [key: string]: string | undefined
    },
    body?: any
}

export interface SuccessResponse extends ResponseData {
    success?: true
}

export interface ErrorResponse extends ResponseData {
    success?: false
}

export function isSuccessResponse(response: ResponseData): response is SuccessResponse {
    return response.status < 400
}

export function isErrorResponse(response: ResponseData): response is ErrorResponse {
    return response.status >= 400
}

export abstract class ErrorWithStatus extends Error {
    public status: number | undefined

    constructor(message: string, status?: number) {
        super(message)
        this.status = status
        this.name = "ErrorWithStatus"
    }
}

export class ValidationError extends ErrorWithStatus {
    public errors: any

    constructor(message: string, errors?: any, status?: number) {
        super(message, status)
        this.name = "ValidationError"
        this.errors = errors
    }
}

/**
 * This type allows to pick the required properties of another type.
 */
export type Require<Type, Key extends keyof Type> = Partial<Type> & {
    [Property in Key]-?: Type[Property]
}

export type SizedTuple<
    T,
    MIN extends number | undefined = undefined,
    MAX extends number | undefined = undefined
> = MIN extends number
    ? MAX extends number
        ? _SizedTuple<T, NumericRangeTuple<MIN, MAX>>
        : TupleObject<T, NumericRangeTuple<0, MIN>> & T[]
    : MAX extends number
    ? _SizedTuple<T, NumericRangeTuple<0, MAX>, true>
    : T[];

type _SizedTuple<
    T,
    ARR extends number[],
    Z extends boolean = false
> = ARR extends [infer HEAD extends number, ...infer TAIL extends number[]]
    ? Tuple<T, HEAD, Z> | _SizedTuple<T, TAIL, Z>
    : never;

type Tuple<T, N extends number, Z extends boolean = false> = _Tuple<
    T,
    NumericRangeTuple<Z extends true ? 0 : 1, N>
>;

type _Tuple<T, N extends number[]> = N extends [
    infer HEAD,
    ...infer TAIL extends number[]
]
    ? HEAD extends 0
        ? [] | _Tuple<T, TAIL>
        : [T, ..._Tuple<T, TAIL>]
    : [];

type TupleObject<T, N extends number[]> = N extends [
    infer HEAD extends number,
    ...infer TAIL extends number[]
]
    ? TAIL extends []
        ? {}
        : { [P in HEAD]: T } & TupleObject<T, TAIL>
    : {};

export type NumericRange<
    START extends number,
    END extends number,
    ARR extends unknown[] = [],
    ACC extends number = never
> = ARR['length'] extends END
    ? ACC | START | END
    : NumericRange<
          START,
          END,
          [...ARR, 1],
          ARR[START] extends undefined ? ACC : ACC | ARR['length']
      >;

type NumericRangeTuple<
    START extends number,
    END extends number,
    ARR extends unknown[] = [],
    ACC extends number[] = []
> = ARR['length'] extends END
    ? [START, ...ACC, END]
    : NumericRangeTuple<
          START,
          END,
          [...ARR, 1],
          ARR[START] extends undefined ? ACC : [...ACC, ARR['length']]
      >;


                export type UserType<T extends "request"|"response"|"all" = "all"> = T extends "all" 
                    ? {
	url: string
	username: string
	scopes: (string)[]
	[k: string]: unknown
}
                    : T extends "request" 
                    ? {
	url: string
	username: string
	scopes: (string)[]
	[k: string]: unknown
}
                    : T extends "response"
                    ? {
	url: string
	username: string
	scopes: (string)[]
	[k: string]: unknown
}
                    : never
                


                export type Platform<T extends "request"|"response"|"all" = "all"> = T extends "all" 
                    ? {
	uri: string
	/**
	 * The JWT issuer of the platform.
	 */
	issuer?: string
	/**
	 * The client ID of the platform.
	 */
	client_id?: string
	/**
	 * The deployment ID of the platform.
	 */
	deployment_id?: string
	registration: {
		/**
		 * The state of the registration.
		 */
		state: "pending" | "complete"
		/**
		 * The registration token used for the manual and dynamic registration.
		 */
		token?: string
	}
	/**
	 * The JWKS URI of the tool.
	 */
	jwks_uri: string
	/**
	 * The login URI of the tool.
	 */
	login_uri: string
	/**
	 * The launch URI of the tool.
	 */
	launch_uri: string
}
                    : T extends "request" 
                    ? {
	/**
	 * The JWT issuer of the platform.
	 */
	issuer?: string
	/**
	 * The client ID of the platform.
	 */
	client_id?: string
	/**
	 * The deployment ID of the platform.
	 */
	deployment_id?: string
	/**
	 * The JWKS URI of the tool.
	 */
	jwks_uri: string
	/**
	 * The login URI of the tool.
	 */
	login_uri: string
	/**
	 * The launch URI of the tool.
	 */
	launch_uri: string
}
                    : T extends "response"
                    ? {
	uri: string
	/**
	 * The JWT issuer of the platform.
	 */
	issuer?: string
	/**
	 * The client ID of the platform.
	 */
	client_id?: string
	/**
	 * The deployment ID of the platform.
	 */
	deployment_id?: string
	registration: {
		/**
		 * The state of the registration.
		 */
		state: "pending" | "complete"
		/**
		 * The registration token used for the manual and dynamic registration.
		 */
		token?: string
	}
	/**
	 * The JWKS URI of the tool.
	 */
	jwks_uri: string
	/**
	 * The login URI of the tool.
	 */
	login_uri: string
	/**
	 * The launch URI of the tool.
	 */
	launch_uri: string
}
                    : never
                


                export type Session<T extends "request"|"response"|"all" = "all"> = T extends "all" 
                    ? {
	uri: string
	/**
	 * The URI of the resource.
	 */
	resource_uri: string
	/**
	 * The URI of the experiment.
	 */
	experiment_uri?: string
	/**
	 * The roles of the session.
	 */
	roles: ("instructor" | "student")[]
}
                    : T extends "request" 
                    ? {
	
}
                    : T extends "response"
                    ? {
	uri: string
	/**
	 * The URI of the resource.
	 */
	resource_uri: string
	/**
	 * The URI of the experiment.
	 */
	experiment_uri?: string
	/**
	 * The roles of the session.
	 */
	roles: ("instructor" | "student")[]
}
                    : never
                


                export type MISSING_NAME<T extends "request"|"response"|"all" = "all"> = T extends "all" 
                    ? {
	uri?: string
	/**
	 * The URI of the experiment template.
	 */
	experiment_template_uri?: string
	/**
	 * The URI of the students.
	 */
	students_uri?: string
}
                    : T extends "request" 
                    ? {
	/**
	 * The URI of the experiment template.
	 */
	experiment_template_uri?: string
}
                    : T extends "response"
                    ? {
	uri?: string
	/**
	 * The URI of the experiment template.
	 */
	experiment_template_uri?: string
	/**
	 * The URI of the students.
	 */
	students_uri?: string
}
                    : never
                


                export type Resource<T extends "request"|"response"|"all" = "all"> = T extends "all" 
                    ? {
	uri?: string
	/**
	 * The URI of the experiment template.
	 */
	experiment_template_uri?: string
	/**
	 * The URI of the students.
	 */
	students_uri?: string
} & {
	[k: string]: unknown
}
                    : T extends "request" 
                    ? {
	/**
	 * The URI of the experiment template.
	 */
	experiment_template_uri?: string
} & {
	[k: string]: unknown
}
                    : T extends "response"
                    ? {
	uri?: string
	/**
	 * The URI of the experiment template.
	 */
	experiment_template_uri?: string
	/**
	 * The URI of the students.
	 */
	students_uri?: string
} & {
	[k: string]: unknown
}
                    : never
                


                export type Student<T extends "request"|"response"|"all" = "all"> = T extends "all" 
                    ? {
	uri: string
	/**
	 * The external id of the student.
	 */
	external_id: string
	/**
	 * The name of the student.
	 */
	name?: string
	/**
	 * The email of the student.
	 */
	email?: string
	role_mapping: ({
		role: string
		device: "GROUP" | string
		[k: string]: unknown
	})[]
}
                    : T extends "request" 
                    ? {
	role_mapping: ({
		role: string
		device: "GROUP" | string
		[k: string]: unknown
	})[]
}
                    : T extends "response"
                    ? {
	uri: string
	/**
	 * The external id of the student.
	 */
	external_id: string
	/**
	 * The name of the student.
	 */
	name?: string
	/**
	 * The email of the student.
	 */
	email?: string
	role_mapping: ({
		role: string
		device: "GROUP" | string
		[k: string]: unknown
	})[]
}
                    : never
                

export function isUserType<T extends "request"|"response"|"all" = "all">(obj: unknown, type: "request" | "response" | "all" | T = "all"): obj is UserType<T> {
    switch (type) {
        case "request":
            return validateUserTypeRequest(obj)
        case "response":
            return validateUserTypeResponse(obj)
        default:
            return validateUserType(obj)
    }
}