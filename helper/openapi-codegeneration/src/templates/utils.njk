{%- macro formatDeclaration(td) -%}
{{ td | replace("{\n", "{ ") | replace("\n}", " }") | replace("\n\t", ", ") | replace("\n", " ") | replace("\t", " ") | replace(r/( )+/g, " ") | replace(r/(, })+/g, " }") | safe }}
{%- endmacro -%}

{%- macro parametersTypeDeclaration(parameters,print_location=true,locations=["cookie","header","path","query"]) -%}
{%- set topdeclaration = "{ " -%}
{%- for location in locations -%}
    {%- if parameters[location] and parameters[location].length > 0 -%}
        {%- if print_location -%}
            {%- set topdeclaration = topdeclaration + location + ": { " -%}
        {%- endif -%}
        {%- set declaration = "" -%}
        {%- for parameter in parameters[location] -%}
            {%- set declaration = declaration + parameter.name + ": " + formatDeclaration(parameter.schema.typeDeclaration) + ", " -%}
        {%- endfor -%}
        {%- set declaration = declaration | reverse | replace(" ,", "") | reverse -%}
        {%- set topdeclaration = topdeclaration + declaration -%}
        {%- if print_location -%}
            {%- set topdeclaration = topdeclaration + " }" -%}
        {%- endif -%}
        {%- set topdeclaration = topdeclaration + ", " -%}
    {%- endif -%}
{%- endfor -%}
{%- set topdeclaration = topdeclaration + " }" -%}
{{- topdeclaration | replace(r/(,  })/g, " }") | safe -}}
{%- endmacro -%}